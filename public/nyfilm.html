<!DOCTYPE html>
<html lang="sv">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lägg till en ny film i databasen</title>

    <!-
select2 är ett bibliotek som bl.a. innehåller avancerade
dropdown-menyer som även har inskrivning av nya värden
<link
href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css"
rel="stylesheet"
/>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

    --> // ANVÄNDER DENNA IST F SELECT2:
    //https://stackoverflow.com/questions/5650457/html-select-form-with-option-to-enter-custom-value

    <!--
      SKA SE UT PÅ DETTA VIS  
    <input type="text" list="cars" />
    <datalist id="cars">
      <option>Volvo</option>
      <option>Saab</option>
      <option>Mercedes</option>
      <option>Audi</option>
    </datalist>
    -->

    <script>
      /**************************
        LAND
      **************************/
      fetch("http://localhost:3000/api/get_laender")
        .then((resp) => resp.json())
        .then(function (data) {
          console.log("#data#" + data);

          console.log(data);
          console.log(data[0]);

          console.log(
            "¤¤¤¤Visa första i json-objektet för LAND: " + data[0].landId
          );

          let bok = data;
          return bok.map(function (data) {
            /*
          let li = createNode('li');
            li.innerHTML = data.bokTitel + ' ' + data.bokForfattare + ' ' + data.kategoriNamn;
            append(ul, li);
            */
          });
        })
        .catch(function (error) {
          console.log(error);
        });

      /**************************
        REGISSÖRER
      **************************/
      fetch("http://localhost:3000/api/get_regissoerer")
        .then((resp) => resp.json())
        .then(function (data) {
          console.log(data);
          console.log("Visa första i json-objektet: " + data[0].bokTitel);
          let bok = data;
          return bok.map(function (data) {
            /*
          let li = createNode('li');
            li.innerHTML = data.bokTitel + ' ' + data.bokForfattare + ' ' + data.kategoriNamn;
            append(ul, li);
            */
          });
        })
        .catch(function (error) {
          console.log(error);
        });

      /**************************
        HUVUDROLLSINNEHAVARE
      **************************/
      fetch("http://localhost:3000/api/get_huvudrollsinnehavare")
        .then((resp) => resp.json())
        .then(function (data) {
          console.log(data);
          console.log("Visa första i json-objektet: " + data[0].bokTitel);
          let bok = data;
          return bok.map(function (data) {
            /*
          let li = createNode('li');
            li.innerHTML = data.bokTitel + ' ' + data.bokForfattare + ' ' + data.kategoriNamn;
            append(ul, li);
            */
          });
        })
        .catch(function (error) {
          console.log(error);
        });

      /**************************
        KATEGORIER
      **************************/
      fetch("http://localhost:3000/api/get_kategorier")
        .then((resp) => resp.json())
        .then(function (data) {
          console.log(data);
          console.log("Visa första i json-objektet: " + data[0].bokTitel);
          let bok = data;
          return bok.map(function (data) {
            /*
          let li = createNode('li');
            li.innerHTML = data.bokTitel + ' ' + data.bokForfattare + ' ' + data.kategoriNamn;
            append(ul, li);
            */
          });
        })
        .catch(function (error) {
          console.log(error);
        });
    </script>
  </head>
  <body>
    <h1>Ny film</h1>

    <section>
      Formulär för nya filmer - postas med fetch mot rätt endpoint
      <ul>
        <li>Titel</li>
        <li>Kategori</li>
        <li>Huvudrollsinnehavare</li>
        <li>Land</li>
        <li>Regissör</li>
      </ul>

      <b>STEG</b>
      <ol>
        <li>
          Hämta befintliga: regissörer, huvudroll, land, kategorier (dvs kanske
          fyra GET-anrop)
        </li>
        <li>
          För varje värde - ha även dess id - det är det som ska användas vid en
          POST
        </li>
        <li>Populera dropdown (använd t ex "select2")</li>
        <li>Vid införande:</li>
        <li>Kolla om värden är OK</li>
        <li>
          Om det är några nya värden (användaren skriver alltså ngt som ej redan
          finns i db): Kör POST för att först lägga till nytt (t ex nytt land)
          och hämta dessa värdens id:n
        </li>

        <li>Till slut - kör POST-anrop med ID:n för</li>
      </ol>
    </section>

    <input type="text" list="cars" id="abc" />
    <datalist id="cars">
      <option>Volvo</option>
      <option>Saab</option>
      <option>Mercedes</option>
      <option>Audi</option>
    </datalist>

    TA VÄRDET MED document.getElementById("abc").value
  </body>
</html>
